{% extends 'base.html.twig' %}

{% block title %}Task Suite - AI Studio{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('css/task-suite.css?v=20260215c') }}">
{% endblock %}

{% block body %}
<div class="suite-page" data-suite-page="ai">
  {% include 'task_suite/_nav.html.twig' %}

  <section class="suite-grid two">
    <article class="suite-panel">
      <h2>AI Input</h2>
      <div class="suite-grid two">
        <label>
          Task title
          <input id="aiTitle" type="text" placeholder="Example: finalize onboarding API flow" />
        </label>
        <label>
          Priority
          <select id="aiPriority">
            <option value="low">Low</option>
            <option value="med" selected>Medium</option>
            <option value="high">High</option>
          </select>
        </label>
        <label>
          Due date
          <input id="aiDueAt" type="date" />
        </label>
        <label>
          Gemini model (optional)
          <input id="geminiModel" type="text" value="gemini-2.0-flash" />
        </label>
      </div>
      <label>
        Context / description
        <textarea id="aiDescription" placeholder="Business context, constraints, expected output..."></textarea>
      </label>
    </article>

    <article class="suite-panel">
      <h2>AI Actions</h2>
      <div class="row wrap">
        <button class="suite-btn" id="btnAiDescription">Smart Description</button>
        <button class="suite-btn" id="btnAiAnalyze">Analyze</button>
        <button class="suite-btn" id="btnAiSubtasks">Subtasks</button>
        <button class="suite-btn" id="btnAiEstimate">Estimate</button>
        <button class="suite-btn" id="btnAiRisk">Risk Score</button>
        <button class="suite-btn" id="btnGeminiFlash">Gemini Flash</button>
      </div>
      <p class="muted">Description uses Gemini automatically when <code>GEMINI_API_KEY</code> exists.</p>
      <div class="ai-meta-line">
        <span class="ai-provider-badge" id="aiProviderBadge">Provider: local</span>
        <span class="muted" id="aiActionStatus">Idle</span>
      </div>
      <details class="ai-output-toggle">
        <summary>Show AI Output</summary>
        <pre id="aiOutput">Run an action to get results.</pre>
      </details>
    </article>
  </section>
</div>
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('js/task-suite.js?v=20260215c') }}"></script>
{% endblock %}
